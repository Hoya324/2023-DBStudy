# CHAPTER 02 관계 데이터 모델
## 관계 데이터 모델의 개념
### 릴레이션
- 릴레이션
    - 행과 열로 구성된 테이블
    - 외부스키마랑 비슷한 느낌
    - 스키마와 인스턴스로 이루어짐
- 스키마
    - 테이블의 첫행인 헤더에 나타난 각 데이터의 특징을 나타내는 속성
- 인스턴스
    - 스키마에 따라 테이블에 실제로 저장되는 데이터의 집합
- 릴레이션 스키마 & 인스턴스
    - 속성 : 릴레이션 스키마의 열
    - 도메인 : 속성이 가질 수 있는 값의 집합
    - 차수 : 속성의 개수
    - 투플 : 릴레이션의 행
    - 카디날리티 : 투플의 수
- 릴레이션의 특징
    - 속성의 단일 값을 가짐
    - 속성은 서로 다른 이름을 가짐
    - 한 속성의 값은 모두 같은 도메인 값을 가짐
    - 속성의 순서는 상관없음
    - 릴레이션 내의 중복된 투플은 허용안함
    - 투플의 순서는 상관없음
## 무결성 제약조건
### 키
- 키 : 릴레이션에서 특정 투플을 식별할 때 사용하는 속성 혹은 속성의 집합
- 슈퍼키 : 투플을 유일하게 식별할 수 있는 하나의 속성 혹은 속성의 집합
- 후보키 : 투플을 유일하게 식별할 수 있는 속성의 최소 집합
- 기본키 : 여러 후보키 중 하나를 선정하여 대표로 삼는 키
    - 릴레이션 내 투플을 식별할 수 있는 고유한 값을 가짐
    - NULL 값은 허용하지 않음
    - 키 값의 변동이 일어나지 않아야함
    - 최대한 적은 수의 속성을 가진 것
    - 향후 키를 사용하는 데 있어서 문제 발생 소지 없어야함
- 대리키 : 기본키를 사용하기 애매하고 마땅한 기본키가 없을 때 가상의 속성을 만들어 기본키로 삼음
- 대체키 : 기본키로 선정되지 않은 후보키
- 외래키 : 다른 릴레이션의 기본키를 참조하는 속성
    - 관계 데이터 모델의 릴레이션 간의 관계를 표현
    - 다른 릴레이션의 기본키를 참조하는 속성
    - 참조하고 참조되는 양쪽 릴레이션의 도메인이 같아야함 등등
### 무결성 제약조건
- 도메인 무결성 제약조건
    - 릴레이션 내의 투플들이 각 속성의 도메인에 지정된 값만을 가져야 한다는 조건
- 개체 무결성 제약조건
    - 릴레이션은 기본키를 지정하고 기본키는 NULL 값을 가져서는 안되며 릴레이션 내에 오직 하나의 값만 존재야야함
    - 기본키가 이미 존재하거나 NULL일 경우 삽입거부
    - 수정은 삽입 연산과 동일한 제약
    - 삭제는 그냥 즉시 수행

- 참조 무결성 제약조건
    - 릴레이션 간의 참조 관계를 선언하는 제약조건
    - 삽입 시 부모 릴레이션에 해당 기본키가 존재하고 개체 무결성 제약조건에 위배되는 값이 없으면 삽입
    - 자식 릴레이션 삭제 시 그냥 삭제
    - 부모 릴레이션 삭제 시 자식 릴레이션의 관련 투플 삭제 후 삭제
    - 수정은 삭제와 삽입 명령이 연속해서 수행됨
## 관계대수
### 관계대수
- 관계대수 연산자
    - 순수 관계 연산 : 셀렉션, 프로젝션, 조인, 디비전, 개명
    - 일반 집합 연산 : 합집합, 차집합, 교집합, 카티전 프로덕트
- 관계대수식
    - 단항 연산자 : 연산자<조건> 릴레이션
    - 이항 연산자 : 릴레이션1 연산자<조건> 릴레이션2
| 주요 연산자 | 설명 |
| --- | --- |
| 셀렉션 | R1에서 조건에 맞는 투플을 추출한다 |
| 프로젝션 | R2에서 조건에 맞는 속성만을 추출한다 |
| 합집합 | R1과 R2의 합집합을 구한다 |
| 차집합 | R1과 R2의 차집합을 구한다 |
| 조인 | R1과 R2의 카티전 프로덕트를 수행한 후 조건에 맞는 투플을 추출한다 |
### 셀렉션과 프로젝션
- 셀렉션
    - 릴레이션의 투플을 추출하기 위한 연산
    - 하나의 릴레이션을 대상으로 찾고자 하는 투플의 조건을 명시하고 그 조건에 만족하는 투플을 반환
- 프로젝션
    - 릴레이션의 속성을 추출하기 위한 연산
### 집합 연산
- 합집합
    - 두 개의 릴레이션을 합하여 하나의 릴레이션을 반환
- 교집합
    - 두 릴레이션이 공통으로 가지고 있는 투플을 반환
- 차집합
    - 첫 번째 릴레이션에는 속하고 두 번째 릴레이션에는 속하지 않는 투플을 반환
- 카티전 프로덕트
    - 두 릴레이션을 수평적으로 연결시켜 하나로 합칠 때 사용
### 조인
- 조인 : 두 릴레이션의 공통 속성을 기준으로 속성 값이 같은 투플을 수평으로 결합하는 연산
 - 세타조인 : 두 릴레이션 간의 속성 값을 비교하여 조건에 맞는 투플을 반환
 - 동등조인 : 속성 값이 같은 투플만을 반환
 - 자연조인 : 속성 이름이 같은 투플만을 대상으로 하되 중복 속성을 제거하고 반환
 - 세미조인 : 확장된 조인 연산에는 두 릴레이션을 조인한 후 한 릴레이션의 투플만 반환
 - 외부조인 : 조인에 실패한 값들을 NULL값으로 채워서 반환
 ### 디비전
 - 다른 연산과 달리 릴레이션의 속성 값의 집합으로 연산 수행
 - R % S1 일 경우 S1의 속성이 존재하는 R의 속성을 반환
 